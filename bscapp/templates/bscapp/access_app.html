{% extends "bscapp/base.html" %}
{% load static %}

{% block addHead %}
<!-- JQuery -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>

<!-- Bootstrap -->
<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

<!-- Walk-through -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-tour/0.11.0/js/bootstrap-tour.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-tour/0.11.0/css/bootstrap-tour.min.css" />

<!-- Auth0 -->
<script src="https://cdn.auth0.com/js/auth0/8.7/auth0.min.js"></script>

<!-- Local JS Files -->
<script type="text/javascript" src="{% static 'js/bsc.js' %}"></script>
<script type="text/javascript" src="{% static 'js/transition.js' %}"></script>

<!-- Local CSS Files -->
<link rel="stylesheet" type="text/css" href="{% static 'css/bsc.css' %}">
<link rel="stylesheet" type="text/css" href="{% static 'css/appmenu.css' %}">
{% endblock %}

<!-- Application's space -->
{% block content %}

<!-- Page Content -->
<div id="page_content" style="float:left; margin-left: 66px; width:745px;">
	<h1 id="section-title">Balanced Scorecard</h1>

	<div id="scorecard_name_div">
		<h1 id="scorecard_name" style="display: inline-block;">Scorecard Name...</h1>
		<i onclick="showScorecardNameEdit()" class="fa fa-pencil" aria-hidden="true"></i>
	</div>

	<div id="scorecard_edit_div" style="display:none">
		<textarea id="scorecard_edit" rows="1" cols="50">Scorecard Name...</textarea>
		<i onclick="hideScorecardNameEdit()" class="fa fa-floppy-o" aria-hidden="true"></i>
	</div>

	<div id="perspectives_div" style="clear:both;">
		<div id="learn_grow_button" class="div-button-active" style="margin-left: 116px;" onclick="set_layout('learngrow')">
			<div name="icons" style="margin:5px">
				<i class="fa fa-graduation-cap" aria-hidden="true"></i>
			</div>
			<div name="text" style="margin:5px;margin-top:0px;">
				<span>Learning and Growth Perspective</span>
			</div>
		</div>
		<div id="business_button" class="div-button-inactive" onclick="set_layout('business')">
			<div name="icons" style="margin:5px">
				<i class="fa fa-briefcase" aria-hidden="true"></i>
			</div>
			<div name="text" style="padding:3px">
				<span>Internal Regional Perspective</span>
			</div>
		</div>
		<div id="customer_button" class="div-button-inactive" onclick="set_layout('customer')">
			<div name="icons" style="margin:5px">
				<i class="fa fa-user" aria-hidden="true"></i>
			</div>
			<div name="text" style="padding:3px">
				<span>Citizen Perspective</span>
			</div>
		</div>
		<div id="financial_button" style="clear:right;" class="div-button-inactive" onclick="set_layout('financial')">
			<div name="icons" style="margin:5px">
				<i class="fa fa-money" aria-hidden="true"></i>
			</div>
			<div name="text" style="padding:3px">
				<span>Vision Perspective</span>
			</div>
		</div>
	</div>

    <div id="perspective_div">
        <div id="learngrow_perspective">
            <h1 id="perspectivetitle" style="clear:left;">Learning and Growth Perspective</h1>

            <div id= "learngrowtable" class="table" style="margin-top: 21px;">
                <div class="titlerow" id="titlerow">
                    <div id="learngrowtable_title_year" class="field first">
                        Year
                    </div>
                    <div id="learngrowtable_title_name" class="field">
                        Performance</br>Index
                    </div>
                    <div id="learngrowtable_title_measure" class="field">
                        Method of</br>Measure
                    </div>
                    <div id="learngrowtable_title_target" class="field">
                        Target Value
                    </div>
                    <div id="learngrowtable_title_actual" class="field">
                        Actual Value
                    </div>
                    <div id="learngrowtable_title_plan" class="field">
                        Plan of Action
                    </div>
                    <div class="field" id="inputfield">
                        Actions
                    </div>
                </div>
                <div class="row" id="learngrowtable_inputrow">
                    <div class="field first">
                        <input class="tableinput" type="text" name="learngrowtable_year_input" id="learngrowtable_year_input">
                    </div>
                    <div class="field">
                        <input class="tableinput" type="text" name="learngrowtable_name_input" id="learngrowtable_name_input">
                    </div>
                    <div class="field">
                        <input class="tableinput" type="text" name="learngrowtable_measure_input" id="learngrowtable_measure_input">
                    </div>
                    <div class="field">
                        <input class="tableinput" type="text" name="learngrowtable_target_input" id="learngrowtable_target_input">
                    </div>
                    <div class="field">
                        <input class="tableinput" type="text" name="learngrowtable_actual_input" id="learngrowtable_actual_input">
                    </div>
                    <div class="field">
                        <input class="tableinput" type="text" name="learngrowtable_plan_input" id="learngrowtable_plan_input">
                    </div>
                    <div class="field">
                        <button class="tableinput" onclick="addRow('learngrowtable');">Add Row</button>
                    </div>
                </div>
            </div>
        </div>

        <div id="business_perspective">
            <h1 id="perspectivetitle" style="clear:left;">Internal Regional Perspective</h1>

            <div id="businesstable" class="table" style="margin-top: 21px;">
                <div class="row titlerow" id="titlerow">
                    <div class="field first">
                        Year
                    </div>
                    <div class="field">
                    	Performance</br>Index
                    </div>
                    <div class="field">
                        Method of</br>Measure
                    </div>
                    <div class="field">
                        Target Value
                    </div>
                    <div class="field">
                        Actual Value
                    </div>
                    <div class="field">
                        Plan of Action
                    </div>

                    <div class="field" id="inputfield">
                        Actions
                    </div>
                </div>
                <div class="row" id="businesstable_inputrow">
                    <div class="field first">
                        <input class="tableinput" type="text" name="businesstable_year_input" id="businesstable_year_input">
                    </div>
                    <div class="field">
                        <input class="tableinput" type="text" name="businesstable_name_input" id="businesstable_name_input">
                    </div>
                    <div class="field">
                        <input class="tableinput" type="text" name="businesstable_measure_input" id="businesstable_measure_input">
                    </div>
                    <div class="field">
                        <input class="tableinput" type="text" name="businesstable_target_input" id="businesstable_target_input">
                    </div>
                    <div class="field">
                        <input class="tableinput" type="text" name="businesstable_actual_input" id="businesstable_actual_input">
                    </div>
                    <div class="field">
                        <input class="tableinput" type="text" name="businesstable_plan_input" id="businesstable_plan_input">
                    </div>
                    <div class="field">
                        <button class="tableinput" onclick="addRow('businesstable');">Add Row</button>
                    </div>
                </div>
            </div>
        </div>

        <div id="customer_perspective">
            <h1 id="perspectivetitle" style="clear:left;">Citizen Perspective</h1>

            <div id= "customertable" class="table" style="margin-top: 21px;">
                <div class="row titlerow" id="titlerow">
                    <div class="field first">
                        Year
                    </div>
                    <div class="field">
                        Performance</br>Index
                    </div>
                    <div class="field">
                        Method of</br>Measure
                    </div>
                    <div class="field">
                        Target Value
                    </div>
                    <div class="field">
                        Actual Value
                    </div>
                    <div class="field">
                        Plan of Action
                    </div>
                    <div class="field" id="inputfield">
                        Actions
                    </div>
                </div>
                <div class="row" id="customertable_inputrow">
                    <div class="field first">
                        <input class="tableinput" type="text" name="customertable_year_input" id="customertable_year_input">
                    </div>
                    <div class="field">
                        <input class="tableinput" type="text" name="customertable_name_input" id="customertable_name_input">
                    </div>
                    <div class="field">
                        <input class="tableinput" type="text" name="customertable_measure_input" id="customertable_measure_input">
                    </div>
                    <div class="field">
                        <input class="tableinput" type="text" name="customertable_target_input" id="customertable_target_input">
                    </div>
                    <div class="field">
                        <input class="tableinput" type="text" name="customertable_actual_input" id="customertable_actual_input">
                    </div>
                    <div class="field">
                        <input class="tableinput" type="text" name="customertable_plan_input" id="customertable_plan_input">
                    </div>
                    <div class="field">
                        <button class="tableinput" onclick="addRow('customertable');">Add Row</button>
                    </div>
                </div>
            </div>
        </div>

        <div id="financial_perspective">
            <h1 id="perspectivetitle" style="clear:left;">Vision Perspective</h1>

            <div id= "financialtable" class="table" style="margin-top: 21px;">
                <div class="row titlerow" id="titlerow">
                    <div class="field first">
                        Year
                    </div>
                    <div class="field">
                        Performance</br>Index
                    </div>
                    <div class="field">
                        Method of</br>Measure
                    </div>
                    <div class="field">
                        Target Value
                    </div>
                    <div class="field">
                        Actual Value
                    </div>
                    <div class="field">
                        Plan of Action
                    </div>
                    <div class="field" id="inputfield">
                        Actions
                    </div>
                </div>
                <div class="row" id="financialtable_inputrow">
                    <div class="field first">
                        <input class="tableinput" type="text" name="financialtable_year_input" id="financialtable_year_input">
                    </div>
                    <div class="field">
                        <input class="tableinput" type="text" name="financialtable_name_input" id="financialtable_name_input">
                    </div>
                    <div class="field">
                        <input class="tableinput" type="text" name="financialtable_measure_input" id="financialtable_measure_input">
                    </div>
                    <div class="field">
                        <input class="tableinput" type="text" name="financialtable_target_input" id="financialtable_target_input">
                    </div>
                    <div class="field">
                        <input class="tableinput" type="text" name="financialtable_actual_input" id="financialtable_actual_input">
                    </div>
                    <div class="field">
                        <input class="tableinput" type="text" name="financialtable_plan_input" id="financialtable_plan_input">
                    </div>
                    <div class="field">
                        <button class="tableinput" onclick="addRow('financialtable');">Add Row</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<form id="download_data_form" method="post" action="{% url 'bscapp_downloaddata' %}">
    {% csrf_token %}
    <input type="hidden" id="tablejson_save" name="tablejson">
    <input type="hidden" id="filename_save" name="filename">
</form>

<div id="scorecard_load_modal" class="scorecard_modal" style="display: none; height:350px;">
	<span class="close" onclick="hideModal('scorecard_load_modal')">&times</span>
	<h2>Which scorecard should be loaded?</h2>
    <p>Select a scorecard from the list below to load.</p>
	<select id="scorecard_select">
	</select>
	<button onclick="loadScorecard()">Load</button>

    <h2>Load from Share ID</h2>
    <p>A Share ID uniquely identifies a Balanced Scorecard. Enter the Share ID provided from the Balanced Scorecards owner to add it to you list of accessible Scorecards</p>
    <input id="share_id_input" type="text">
    <button onclick="addToShares()">Add to Your List</button>

    <form id="addtoshares" method="post" action="{% url 'bscapp_addtoshares' %}" style="display: none;">
    </form>
</div>

<div id="confirm_delete_modal" class="scorecard_modal" style="display: none; height:150px;">
	<span class="close" onclick="hideModal('confirm_delete_modal')">&times</span>
	<h2>Delete Balanced Scorecard</h2>
    <p>Do you want to delete this scorecard? You cannot undo this action.</p>
    <button onclick="deleteScorecard();hideModal('confirm_delete_modal');">Yes</button>
    <button onclick="hideModal('confirm_delete_modal')">No</button>
</div>

<div id="swotcard_share_modal" class="modal" style="display: none; height: 250px">
	<span class="close" onclick="hideModal('swotcard_share_modal')">&times</span>
	<h2>Share ID</h2>
    <p>This Share ID uniquely identifies your Balanced Scorecard. Provide the following Share ID to the user you would like to have access to your Balanced Scorecard</p>
    <p id="share_id_in_modal">This Balanced Scorecard is not saved yet. Please save it or load an existing Balanced Scorecard to get a Share ID.</p>
</div>

<div id="historic_data_modal" class="modal" style="display: none; height: 250px; width:300px;">
	<span class="close" onclick="hideModal('historic_data_modal')">&times</span>
	<h2>Data History</h2>
    <table id="historic_data_table" action="{% url 'bscapp_listobservations' %}">
        <tr>
            <th>Actual</th>
            <th>Timestamp</th>
        </tr>
    </table>
</div>
<!-- Page Content -->

<!-- Page Menus -->
<div style="float: left; margin-left: 66px; margin-top: 61px">
	<div id="sidemenu-div" class="sidemenu-div" >
		<div>
			<ul class="sidemenu">
                <li id="newscorecard" onclick="newScorecard()" action="{% url 'bscapp_savetables'%}" title="Click to create new scorecard"><i class="fa fa-file "></i> New</li>
				<li id="savetables" {% if not request.session.bscapp_profile.email %} style="background:grey;" title="Please log in to save."{% endif %} onclick="saveScorecard()" action="{% url 'bscapp_savetables'%}" title="Save current scorecard"><i class="fa fa-floppy-o"></i> Save</li>
                <li id="deletetables" {% if not request.session.bscapp_profile.email %} style="background:grey;" title="Please log in to save."{% endif %} onclick="confirmDelete()" action="{% url 'bscapp_deletetables'%}" title="Delete current scorecard"><i class="fa fa-trash"></i> Delete</li>
				<li id="loadtables" {% if not request.session.bscapp_profile.email %} style="background:grey;" title="Please log in to load."{% endif %} onclick="getScorecards()" action="{% url 'bscapp_loadtables'%}" title="Load an existing scorecard"><i class="fa fa-folder-open"></i> Open</li>
                <li id="loadtables" onclick="createAndClickFile()" action="{% url 'bscapp_loadtables'%}" title="Load an existing scorecard from a JSON file"><i class="fa fa-upload"></i> Upload from JSON</li>
                <li onclick="setSaveForm(generateJSON(), 'balanced_scorecard.json');" title="Export current scorecard to a JSON file"><i class="fa fa-download"></i> Export to JSON</li>
                <li onclick="setSaveForm(generateCSV(), 'balanced_scorecard.csv');" title="Export currect scorecard to a CSV file"><i class="fa fa-download"></i> Export to CSV</li>
				<li onclick="export_pdf();" title="Export currect scorecard to a PDF file"><i class="fa fa-file-pdf-o"></i> Export to PDF</li>
                <li onclick="openShareModal()" title="Access Current Scorecards Share ID"><i class="fa fa-share-alt"></i> Share</li>
				<li onclick="window.location = '{% url 'bscapp_guide' %}'"><i class="fa fa-question-circle-o"></i> Help</li>
				<li onclick="window.location = '{% url 'bscapp_index' %}'"><i class="fa fa-info-circle"></i> About</li>
			</ul>
		</div>
		<div class="sidemenu-readmore">
			Balanced Scorecard Menu
		</div>
	</div>

	<button id="getscorecards" onclick="getScorecards()" action="{% url 'bscapp_getscorecards' %}" style="display:none;">Get Scorecards</button>

    <aside id='sidebar'>
        <a href="{% static 'data/Balanced_Scorecard_Guideline.pdf' %}" target="_blank">
            <button class="alt"> Download Guide  <i class="fa fa-file-pdf-o" aria-hidden="true"></i></button>
        </a>
    </aside>
</div>

<form id="exporttopdf_form" method="post" action="{% url 'bscapp_exporttopdf' %}" style="display:none;" target="_blank">
    {% csrf_token %}
    <input type="hidden" name="html_string" id="perspectivediv_html">
</form>
<!-- Page Menus -->

<!-- Application's space -->
{% endblock %}